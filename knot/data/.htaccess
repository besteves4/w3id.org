Header set Access-Control-Allow-Origin *
Options +FollowSymLinks
RewriteEngine on

# Default behaviour
# Rewrite rule to serve HTML content
RewriteCond %{HTTP_ACCEPT} html
RewriteRule ^$ https://projects.dharc.unibo.it/knot/ [R=302,L]
RewriteRule ^sparql$ https://projects.dharc.unibo.it/knot/sparql [R=302,L]
RewriteRule ^view-$1 https://projects.dharc.unibo.it/knot/view-$1 [R=302,L]
RewriteRule ^term-$1 https://projects.dharc.unibo.it/knot/term-$1 [R=302,L]
RewriteRule ^record-$1 https://projects.dharc.unibo.it/knot/record-$1 [R=302,L]
RewriteRule ^modify-$1 https://projects.dharc.unibo.it/knot/modify-$1 [R=302,L]
RewriteRule ^review-$1 https://projects.dharc.unibo.it/knot/review-$1 [R=302,L]
RewriteRule ^records$ https://projects.dharc.unibo.it/knot/records [R=302,L]
RewriteRule ^welcome-$1 https://projects.dharc.unibo.it/knot/welcome-$1 [R=302,L]
RewriteRule ^documentation$ https://projects.dharc.unibo.it/knot/documentation [R=302,L]
RewriteRule ^(.+)$ https://projects.dharc.unibo.it/knot/view-$1 [R=303,L]

# Rewrite rule to serve RDF/XML
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml [OR]
RewriteCond %{HTTP_ACCEPT} application/xml [OR]
RewriteCond %{HTTP_ACCEPT} text/n3 [OR]
RewriteCond %{HTTP_ACCEPT} text/turtle [OR]
RewriteCond %{HTTP_ACCEPT} application/n-triples [OR]
RewriteCond %{HTTP_ACCEPT} text/plain [OR]
RewriteCond %{HTTP_ACCEPT} application/ld\+json [OR]
RewriteCond %{HTTP_ACCEPT} application/json
RewriteRule ^(.+)$ http://projects.dharc.unibo.it/knot/sparql?query=DESCRIBE%20<https://w3id.org/knot/data/$1> [R=303,L]
